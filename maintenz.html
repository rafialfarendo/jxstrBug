<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JxstrBug V6</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
/* Reset & dasar */
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    background:#000;
    color:#ffbcbc;
    font-family:'Orbitron',sans-serif;
    -webkit-tap-highlight-color: transparent;
    display:flex;
    justify-content:center;
    transition: none;
    position:relative;
}
.wrap{
    width:100%;
    max-width:430px;
    margin:0 auto;
    padding:20px 20px 40px;
    padding-top:80px;
    transition: transform 0.3s ease;
    min-height:115vh;
}

/* Header */
.head{
    display:flex; justify-content:space-between; align-items:center;
    position: fixed; top: 0; left: 0; right:0;
    background:#000; padding:20px; box-sizing:border-box;
    border-bottom:1px solid #ff3a3a33; height:60px;
    z-index: 50;
}
.hb,.pf{
    width:40px; height:40px; border:1px solid #ff3a3a33;
    border-radius:12px; display:flex; justify-content:center; align-items:center;
    cursor: pointer; user-select:none;
    transition: background 0.2s;
}
.hb:hover, .pf:hover {
    background: rgba(255, 77, 77, 0.1);
}
.title{ color:#ff4d4d; font-size:22px; }

.menu-title{
    text-align:center; padding:14px; border-radius:20px;
    border:1px solid #ff3a3a33; color:#ff4d4d; margin-bottom:20px;
}

/* Card & grid */
.card-box{ border:1px solid #ff3a3a33; border-radius:16px; padding:18px; margin-bottom:22px; display:flex; justify-content:space-between; align-items:center; background:#0d0d0d;}
.card-left{ display:flex; flex-direction:column; }
.title-small{ font-size:16px; color:#ffbcbc; }
.sub{ font-size:11px; color:#ffc7c7; margin-top:4px; }

.svg-btn{ width:32px; height:32px; padding:6px; border-radius:10px; border:1px solid #ff4d4d55; background:#ff4d4d22; display:flex; justify-content:center; align-items:center; cursor: pointer; user-select:none; transition: background 0.2s;}
.svg-btn:hover { background: rgba(255, 77, 77, 0.3); }
svg{ stroke:#ffbcbc; fill:none; stroke-width:2; stroke-linecap:round; }

.grid-menu{ display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:10px; }
.menu-btn{ position:relative; min-height:148px; border-radius:22px; background:#0d0d0d; border:1px solid #ff3a3a33; overflow:hidden; padding:16px; box-shadow: inset 0 -6px 18px rgba(0,0,0,0.45); cursor: pointer; user-select:none; transition: transform 0.2s, border-color 0.2s;}
.menu-btn:hover { transform: translateY(-2px); border-color: rgba(255, 77, 77, 0.5); }
.icon-circle{ position:absolute; top:14px; left:14px; width:72px; height:72px; border-radius:50%; background:rgba(255,58,58,0.05); border:2px solid rgba(255,58,58,0.1); display:flex; align-items:center; justify-content:center; }
.icon-img{ width:36px; height:36px; object-fit:contain; display:block; }
.menu-title-text{ position:absolute; left:18px; bottom:34px; font-size:20px; color:#ffbcbc; letter-spacing:1px; }
.menu-sub{ position:absolute; left:18px; bottom:12px; font-size:12px; color:#ffc7c7; }

.update-card{ border:1px solid #ff3a3a33; border-radius:16px; padding:18px; margin-top:22px; background:#0d0d0d; cursor:pointer; transition: border-color 0.2s; }
.update-card:hover { border-color: rgba(255, 77, 77, 0.5); }
.update-title{ font-size:16px; color:#ffbcbc; }
.update-sub{ font-size:11px; color:#ffc7c7; margin-top:4px; }

/* Tombol Free Coin's Event yang baru */
.freecoin-card{
    border:1px solid #ff3a3a33;
    border-radius:16px;
    padding:18px;
    margin-top:22px;
    background:#0d0d0d;
    cursor:pointer;
    transition: all 0.2s;
    position: relative;
}
.freecoin-card:hover {
    border-color: rgba(255, 77, 77, 0.5);
    background: rgba(255, 77, 77, 0.05);
}
.freecoin-title{
    font-size:16px;
    color:#ffbcbc;
    margin-bottom: 4px;
}
.freecoin-sub{
    font-size:11px;
    color:#ffc7c7;
}

@media (max-width:360px){
    .icon-circle{ width:64px; height:64px; top:12px; left:12px; }
    .menu-title-text{ font-size:18px; left:14px; bottom:36px; }
    .menu-sub{ left:14px; bottom:12px; font-size:11px; }
}

/* Popups & FAB & Toast (tetap sama) */
.popup-overlay{
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background-color: rgba(0,0,0,0.55);
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:100;
    opacity:0;
    visibility:hidden;
    transition:opacity 0.25s, visibility 0.25s;
}
.popup-overlay.active{
    opacity:1;
    visibility:visible;
}
.popup-content{
    background:#0d0d0d;
    border:1px solid #ff3a3a33;
    border-radius:18px;
    padding:20px;
    width:78%;
    max-width:320px;
    text-align:center;
    box-shadow:0 8px 22px rgba(255,58,58,0.08);
}

/* Popup Free Coin Event - ukuran sedang dan agak panjang */
.freecoin-popup-content {
    background:#0d0d0d;
    border:1px solid #ff3a3a33;
    border-radius:18px;
    padding:24px;
    width:85%;
    max-width:340px;
    text-align:center;
    box-shadow:0 8px 22px rgba(255,58,58,0.08);
    max-height: 80vh;
    overflow-y: auto;
}

.popup-icon{
    width:48px;
    height:48px;
    margin:0 auto 14px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:50%;
    background:rgba(255,58,58,0.05);
    border:1.6px solid rgba(255,58,58,0.1);
}
.popup-title{
    font-size:18px;
    color:#ff4d4d;
    margin-bottom:10px;
}

/* Title khusus untuk Free Coin Event */
.freecoin-popup-title {
    font-size: 20px;
    color: #ff4d4d;
    margin-bottom: 15px;
    font-weight: 700;
}

.popup-text{
    font-size:13px;
    color:#ffbcbc;
    margin-bottom:18px;
    line-height:1.35;
}

/* Text khusus untuk Free Coin Event */
.freecoin-popup-text {
    font-size: 14px;
    color: #ffbcbc;
    margin-bottom: 20px;
    line-height: 1.5;
    text-align: center;
}

.popup-buttons{
    display:flex;
    justify-content:space-between;
    gap:10px;
}
.popup-btn{
    flex:1;
    padding:10px 14px;
    border-radius:10px;
    font-family:'Orbitron', sans-serif;
    font-size:13px;
    cursor:pointer;
    border:1px solid #ff3a3a33;
    outline:none;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.2s;
}
.popup-btn.cancel{
    background:transparent;
    color:#ffbcbc;
}
.popup-btn.cancel:hover {
    background: rgba(255, 77, 77, 0.1);
}
.popup-btn.topup{
    background:rgba(255,58,58,0.1);
    color:#ff4d4d;
}
.popup-btn.topup:hover {
    background:rgba(255,58,58,0.2);
}
.popup-input {
    width:100%;
    padding:12px 14px;
    margin-bottom:18px;
    border-radius:10px;
    background: rgba(255,77,77,0.05);
    border:1px solid rgba(255,58,58,0.3);
    color:#ffbcbc;
    font-family:'Orbitron',sans-serif;
    font-size:13px;
    outline:none;
}
.popup-input:focus {
    border-color: rgba(255,77,77,0.7);
}

/* Task text area untuk Free Coin Event */
.freecoin-task-text {
    background: rgba(255, 77, 77, 0.05);
    border: 1px solid rgba(255, 58, 58, 0.3);
    border-radius: 12px;
    padding: 16px;
    margin: 20px 0;
    min-height: 80px;
    color: #ffbcbc;
    font-size: 13px;
    line-height: 1.5;
    text-align: left;
    white-space: pre-line;
}

.livechat-buttons {
    display:flex;
    flex-direction:column;
    gap:10px;
    margin-bottom:10px;
}
.livechat-btn {
    padding:12px 16px;
    border-radius:10px;
    background: rgba(255,77,77,0.05);
    border:1px solid rgba(255,58,58,0.3);
    color:#ffbcbc;
    font-family:'Orbitron',sans-serif;
    font-size:13px;
    cursor:pointer;
    text-align:center;
    transition: background 0.2s, border-color 0.2s;
}
.livechat-btn:hover {
    background: rgba(255,77,77,0.1);
    border-color: rgba(255,77,77,0.5);
}

.settings-item {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 0;
    border-bottom:1px solid rgba(255,58,58,0.1);
}
.settings-item:last-child {
    border-bottom:none;
}
.settings-text {
    font-size:14px;
    color:#ffbcbc;
}
.settings-switch {
    position:relative;
    width:44px;
    height:24px;
}
.settings-switch input {
    opacity:0;
    width:0;
    height:0;
}
.settings-slider {
    position:absolute;
    cursor:pointer;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background-color:rgba(255,58,58,0.1);
    transition:.3s;
    border-radius:34px;
}
.settings-slider:before {
    position:absolute;
    content:"";
    height:18px;
    width:18px;
    left:3px;
    bottom:3px;
    background-color:#ffbcbc;
    transition:.3s;
    border-radius:50%;
}
input:checked + .settings-slider {
    background-color:rgba(255,77,77,0.3);
}
input:checked + .settings-slider:before {
    transform:translateX(20px);
}

.toast {
    position: fixed;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: rgba(255,77,77,0.15);
    border:1px solid rgba(255,77,77,0.3);
    color:#ffbcbc;
    padding:12px 20px;
    border-radius:10px;
    font-size:13px;
    z-index: 200;
    opacity:0;
    transition: transform 0.3s, opacity 0.3s;
}
.toast.show {
    transform: translateX(-50%) translateY(0);
    opacity:1;
}

.loading {
    display:inline-block;
    width:16px;
    height:16px;
    border:2px solid #ff4d4d;
    border-radius:50%;
    border-top-color:transparent;
    animation: spin 1s ease-in-out infinite;
}
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.fab-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 80;
    display:flex;
    align-items:center;
    gap:8px;
    transition: transform 0.35s ease, right 0.35s ease;
}
.fab-container.collapsed {
    transform: translateX(70px);
}
.fab {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: #0d0d0d;
    border: 1px solid #ff3a3a33;
    box-shadow: inset 0 -6px 18px rgba(0,0,0,0.45);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    color:#ffbcbc;
    cursor:pointer;
    transition:0.25s;
}
.fab:active {
    transform: scale(0.97);
}
.fab.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background: linear-gradient(135deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    box-shadow: 0 4px 12px rgba(0,0,0,0.45);
}
.fab-logo {
    width: 24px;
    height: 24px;
    margin-bottom: 6px;
}
.fab-timer {
    font-size: 11px;
    font-weight:700;
    color: #ffecec;
    background: rgba(0,0,0,0.18);
    padding: 4px 8px;
    border-radius: 8px;
    min-width: 52px;
    text-align:center;
}
.fab-tab {
    width: 36px;
    height: 36px;
    border-radius: 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.06);
    color:#ffbcbc;
    cursor:pointer;
    user-select:none;
    transition: transform 0.15s;
    font-weight:700;
}
.fab-container.collapsed .fab {
    opacity:0;
    pointer-events:none;
    transform: scale(0.9);
}
.fab-container:not(.collapsed) .fab-tab {
    opacity:0;
    pointer-events:none;
    transform: translateX(8px);
}
.fab-tab.rotate {
    transform: rotate(180deg);
}
.fab:focus, .fab-tab:focus {
    outline: 2px solid rgba(255,77,77,0.25);
    outline-offset:2px;
}

@media (max-width:420px){
    .fab-container {
        right: 14px;
        bottom: 16px;
    }
    .fab {
        width:64px;
        height:64px;
    }
}

/* Side Menu Styles */
.side-menu {
    position: fixed;
    top: 0;
    left: -240px;
    width: 240px;
    height: 100%;
    background: #0d0d0d;
    border-right: 1px solid #ff3a3a33;
    z-index: 1000;
    padding: 20px 0;
    transition: left 0.3s ease;
    overflow-y: auto;
    box-shadow: 4px 0 15px rgba(0, 0, 0, 0.3);
}
.side-menu.open {
    left: 0;
}
.menu-header {
    padding: 0 20px 20px;
    border-bottom: 1px solid rgba(255, 58, 58, 0.2);
    margin-bottom: 15px;
    text-align: center;
}
.menu-header-text {
    font-size: 18px;
    color: #ff4d4d;
    font-weight: 700;
}

.menu-items {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 0 15px;
}
/* menghapus ikon kecil: tidak ada .menu-item-icon */
.menu-item {
    padding: 14px 16px;
    background: rgba(255, 77, 77, 0.05);
    border: 1px solid rgba(255, 58, 58, 0.2);
    border-radius: 12px;
    color: #ffbcbc;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
}
.menu-item:hover {
    background: rgba(255, 77, 77, 0.1);
    border-color: rgba(255, 77, 77, 0.5);
    transform: translateX(3px);
}
.menu-item:active {
    transform: translateX(3px) scale(0.98);
}

.menu-footer {
    margin-top: 30px;
    padding: 20px 15px 0;
    border-top: 1px solid rgba(255, 58, 58, 0.2);
}
.menu-footer-title {
    font-size: 13px;
    color: #ff4d4d;
    margin-bottom: 10px;
    font-weight: 700;
}
.owner-info {
    background: rgba(255, 77, 77, 0.05);
    border: 1px solid rgba(255, 58, 58, 0.2);
    border-radius: 12px;
    padding: 12px 14px;
    margin-bottom: 15px;
}
.owner-text {
    font-size: 12px;
    color: #ffc7c7;
    line-height: 1.4;
}

/* Telegram card: ubah menjadi merah termasuk logo */
.telegram-btn {
    width: 100%;
    padding: 12px 16px;
    background: rgba(255, 77, 77, 0.12);
    border: 1px solid rgba(255, 77, 77, 0.35);
    border-radius: 12px;
    color: #ffbcbc;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.telegram-btn svg path {
    fill: #ff4d4d !important;
    stroke: none !important;
}
.telegram-btn:hover {
    background: rgba(255, 77, 77, 0.18);
    border-color: rgba(255, 77, 77, 0.55);
}
.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    z-index: 999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}
.menu-overlay.active {
    opacity: 1;
    visibility: visible;
}
.telegram-btn {
  font-family: 'Orbitron', sans-serif; /* paksa gunakan Orbitron */
  color: #ffbcbc;                       /* pastikan kontras */
  display: flex;
  align-items: center;
  gap: 8px;
}
.telegram-btn span {
  display: inline-block;
  z-index: 2;
}
.telegram-btn svg { z-index: 1; }

/* ===== Maintenance (tidak bisa ditutup) ===== */
.maintenance-overlay{
    position: fixed;
    inset: 0;
    background: linear-gradient(180deg, rgba(0,0,0,0.9), rgba(0,0,0,0.95));
    display:flex;
    justify-content:center;
    align-items:center;
    z-index: 10000; /* sangat tinggi */
    pointer-events: auto;
}
.maintenance-card{
    width: 88%;
    max-width:420px;
    background: #0b0b0b;
    border: 1px solid #ff3a3a33;
    border-radius: 16px;
    padding: 26px;
    text-align:center;
    box-shadow: 0 12px 40px rgba(0,0,0,0.7);
}
.maintenance-title{
    font-size:22px;
    color:#ff4d4d;
    font-weight:700;
    margin-bottom:12px;
}
.maintenance-text{
    font-size:14px;
    color:#ffbcbc;
    line-height:1.45;
    margin-bottom:8px;
}
/* pastikan overlay tetap menyita fokus */
.maintenance-overlay:focus { outline: none; }
</style>
</head>
<body>
<!-- Side menu stays outside .wrap -->
<div class="side-menu" id="sideMenu" aria-hidden="true">
    <div class="menu-header">
        <div class="menu-header-text">JxstrBug Menu</div>
    </div>
    <div class="menu-items">
        <!-- ikon dihapus sesuai permintaan -->
        <div class="menu-item" id="qrGeneratorBtn"><span>QR Generator</span></div>
        <div class="menu-item" id="tools2Btn"><span>Phone Lookup</span></div>
        <div class="menu-item" id="tools3Btn"><span>Email OSINT</span></div>
    </div>
    <div class="menu-footer">
        <div class="menu-footer-title">Owner Information</div>
        <div class="owner-info">
            <div class="owner-text">JxstrBug V6</div>
            <div class="owner-text" style="margin-top: 5px; font-size: 11px;">Made By @Kimpiwww </div>
            <div class="owner-text" style="margin-top: 5px; font-size: 11px;">Version 6.0.1</div>
        </div>
        <button class="telegram-btn" id="telegramBtn">
            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M21.5 2.5L2.5 9.5L8.5 12.5L15.5 7.5L10.5 13.5L17.5 20.5L21.5 2.5Z" /></svg>
            <span>Telegram</span>
        </button>
    </div>
</div>

<div class="menu-overlay" id="menuOverlay" aria-hidden="true"></div>

<!-- Popup untuk Free Coin Event -->
<div class="popup-overlay" id="freecoinPopup">
    <div class="freecoin-popup-content">
        <div class="freecoin-popup-title">Free coin's event</div>
        <div class="freecoin-popup-text">Complete the tasks below and get the redemption code, the tasks will be different every day.</div>
        <div class="freecoin-task-text" id="freecoinTaskText">
            Loading task...
        </div>
        <div class="popup-buttons">
            <button class="popup-btn cancel" id="freecoinCloseBtn">Close</button>
        </div>
    </div>
</div>

<!-- ===== Maintenance overlay (tidak bisa ditutup) ===== -->
<div class="maintenance-overlay" id="maintenanceOverlay" role="alertdialog" aria-modal="true" aria-labelledby="maintenanceTitle" tabindex="-1">
    <div class="maintenance-card" role="document">
        <div id="maintenanceTitle" class="maintenance-title">Server Under Maintenance</div>
        <div class="maintenance-text">The server is currently being updated, please come back today at 12.00</div>
        <!-- Tidak ada tombol close; overlay sengaja permanen -->
    </div>
</div>

<div class="wrap" id="wrap">
    <div class="head">
      <div class="hb" id="menuBtn" aria-label="Open menu" role="button">≡</div>
      <div class="title">JxstrBug V6</div>
      <div class="pf" id="profileBtn" role="button" aria-label="Profile"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 8-4 8-4s8 0 8 4"/></svg></div>
    </div>

    <div class="menu-title">Jxstr Tools Menu List</div>

    <div class="card-box" id="limitCard">
        <div class="card-left"><div class="title-small" id="limitText">Your Coins : 0</div><div class="sub">your remaining coins</div></div>
        <div class="svg-btn" id="limitBtn" role="button" aria-label="Top up"><svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg></div>
    </div>

    <div class="grid-menu">
        <div class="menu-btn" id="waBugsBtn" role="button"><div class="icon-circle"><img class="icon-img" src="icon1.png" onerror="this.style.display='none'"></div><div class="menu-title-text">Wa Bugs</div><div class="menu-sub">WhatsApp bugs</div></div>
        <div class="menu-btn" id="downloadBtn" role="button"><div class="icon-circle"><img class="icon-img" src="icon2.png" onerror="this.style.display='none'"></div><div class="menu-title-text">Download</div><div class="menu-sub">Downloader tools</div></div>
        <div class="menu-btn" id="livechatBtn" role="button"><div class="icon-circle"><img class="icon-img" src="icon3.png" onerror="this.style.display='none'"></div><div class="menu-title-text">Livechat</div><div class="menu-sub">Direct chat admin</div></div>
        <div class="menu-btn" id="settingsBtn" role="button"><div class="icon-circle"><img class="icon-img" src="icon4.png" onerror="this.style.display='none'"></div><div class="menu-title-text">Settings</div><div class="menu-sub">Application settings</div></div>
    </div>

    <div class="update-card" id="updateCard" role="button"><div class="card-left"><div class="update-title">Update information</div><div class="update-sub">new update information</div></div></div>

    <!-- Tombol Free Coin's Event baru -->
    <div class="freecoin-card" id="freecoinCard" role="button">
        <div class="card-left">
            <div class="freecoin-title">Free coin's event</div>
            <div class="freecoin-sub">Get coin's complete the task</div>
        </div>
    </div>
</div>

<!-- POPUPS -->
<div class="popup-overlay" id="topupPopup"><div class="popup-content"><div class="popup-icon"><svg viewBox="0 0 24 24" width="26" height="26"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div><div class="popup-title">Top Up Coins</div><div class="popup-text">You need to contact the admin to purchase coins, or you can use live chat for purchases.</div><div class="popup-buttons"><button class="popup-btn cancel" id="cancelBtn">Cancel</button><button class="popup-btn topup" id="topupBtn">Top Up</button></div></div></div>

<div class="popup-overlay" id="premiumPopup"><div class="popup-content"><div class="popup-title" id="premiumTitle">Log in premium account</div><div class="popup-text" id="premiumText">You need to enter the premium key to open all access, unlimited coins, unlimited sender, and more. Contact the admin to purchase the premium key.</div><input type="text" class="popup-input" id="premiumKeyInput" placeholder="Enter premium key"><div class="popup-buttons"><button class="popup-btn cancel" id="premiumCancelBtn">Cancel</button><button class="popup-btn topup" id="premiumLoginBtn" aria-label="Login premium"><span id="loginBtnText">Log In</span><span id="loginLoading" class="loading" style="display:none" aria-hidden="true"></span></button></div></div></div>

<div class="popup-overlay" id="successPopup"><div class="popup-content"><div class="popup-icon"><svg viewBox="0 0 24 24" width="26" height="26"><path d="M20 6L9 17l-5-5"/></svg></div><div class="popup-title">Successful login to premium user</div><div class="popup-text">You now have full access to all features. Thank you for purchasing.</div><div class="popup-buttons"><button class="popup-btn topup" id="successCloseBtn">Close</button></div></div></div>

<div class="popup-overlay" id="livechatPopup"><div class="popup-content"><div class="popup-title">Livechat Type</div><div class="popup-text">Choose the type of livechat you need:</div><div class="livechat-buttons"><button class="livechat-btn" id="askBtn">For Ask</button><button class="livechat-btn" id="buyBtn">For Buy</button></div><div class="popup-buttons"><button class="popup-btn cancel" id="livechatCancelBtn">Cancel</button></div></div></div>

<div class="popup-overlay" id="settingsPopup"><div class="popup-content"><div class="popup-title">Settings</div><div class="popup-text" style="margin-bottom: 20px;">Adjust your application settings:</div><div class="settings-item"><div class="settings-text">Remind me</div><label class="settings-switch"><input type="checkbox" id="remindSwitch"><span class="settings-slider"></span></label></div><div class="settings-item"><div class="settings-text">Audio intro</div><label class="settings-switch"><input type="checkbox" id="audioSwitch"><span class="settings-slider"></span></label></div><div class="popup-buttons" style="margin-top: 20px;"><button class="popup-btn cancel" id="settingsCancelBtn">Close</button></div></div></div>

<div class="toast" id="toast" role="status" aria-live="polite">Wrong key</div>

<div class="fab-container" id="fabContainer" aria-hidden="false"><div class="fab-tab" id="fabTab" title="Toggle FAB" role="button" aria-label="Toggle free coin button">‹</div><div class="fab" id="freeCoinFab" role="button" aria-label="Claim free coins"><img src="freelimit.png" class="fab-logo" alt="" onerror="this.style.display='none'"><div class="fab-timer" id="fabTimer">Claim +2</div></div></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Elements
    const wrap = document.getElementById('wrap');
    const sideMenu = document.getElementById('sideMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuBtn = document.getElementById('menuBtn');
    const limitBtn = document.getElementById('limitBtn');
    const profileBtn = document.getElementById('profileBtn');
    const topupPopup = document.getElementById('topupPopup');
    const premiumPopup = document.getElementById('premiumPopup');
    const successPopup = document.getElementById('successPopup');
    const cancelBtn = document.getElementById('cancelBtn');
    const topupBtn = document.getElementById('topupBtn');
    const premiumCancelBtn = document.getElementById('premiumCancelBtn');
    const premiumLoginBtn = document.getElementById('premiumLoginBtn');
    const successCloseBtn = document.getElementById('successCloseBtn');
    const premiumKeyInput = document.getElementById('premiumKeyInput');
    const toast = document.getElementById('toast');
    const premiumTitle = document.getElementById('premiumTitle');
    const premiumText = document.getElementById('premiumText');
    const loginBtnText = document.getElementById('loginBtnText');
    const loginLoading = document.getElementById('loginLoading');
    const limitText = document.getElementById('limitText');
    const updateCard = document.getElementById('updateCard');

    const waBugsBtn = document.getElementById('waBugsBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const livechatBtn = document.getElementById('livechatBtn');
    const settingsBtn = document.getElementById('settingsBtn');

    const livechatPopup = document.getElementById('livechatPopup');
    const askBtn = document.getElementById('askBtn');
    const buyBtn = document.getElementById('buyBtn');
    const livechatCancelBtn = document.getElementById('livechatCancelBtn');

    const settingsPopup = document.getElementById('settingsPopup');
    const remindSwitch = document.getElementById('remindSwitch');
    const audioSwitch = document.getElementById('audioSwitch');
    const settingsCancelBtn = document.getElementById('settingsCancelBtn');

    const freeCoinFab = document.getElementById('freeCoinFab');
    const fabTimer = document.getElementById('fabTimer');
    const fabContainer = document.getElementById('fabContainer');
    const fabTab = document.getElementById('fabTab');

    const qrGeneratorBtn = document.getElementById('qrGeneratorBtn');
    const tools2Btn = document.getElementById('tools2Btn');
    const tools3Btn = document.getElementById('tools3Btn');
    const telegramBtn = document.getElementById('telegramBtn');

    // Element baru untuk Free Coin Event
    const freecoinCard = document.getElementById('freecoinCard');
    const freecoinPopup = document.getElementById('freecoinPopup');
    const freecoinTaskText = document.getElementById('freecoinTaskText');
    const freecoinCloseBtn = document.getElementById('freecoinCloseBtn');

    // Maintenance element (tidak bisa ditutup)
    const maintenanceOverlay = document.getElementById('maintenanceOverlay');

    let coins = 0;
    let lastClaimTime = null;
    let isPremium = false;
    const CLAIM_LIMIT_HOUR = 12;
    const COINS_PER_CLAIM = 2;
    const FREECOIN_TASK_URL = 'https://api.npoint.io/82b1bb457db95542231c'; // ganti dengan URL npoint Anda

    fabTimer.textContent = "Claim +2";

    function formatTime(seconds){
        if (seconds < 0) seconds = 0;
        const hrs = Math.floor(seconds / 3600);
        const mins = Math.floor((seconds % 3600) / 60);
        const secs = seconds % 60;
        return `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
    }

    function updateTimer(){
        if (isPremium) {
            freeCoinFab.style.display = 'none';
            fabContainer.setAttribute('aria-hidden','true');
            return;
        } else {
            freeCoinFab.style.display = '';
            fabContainer.setAttribute('aria-hidden','false');
        }

        if (!lastClaimTime){
            freeCoinFab.classList.remove('disabled');
            fabTimer.textContent = "Claim +2";
            return;
        }

        const last = new Date(lastClaimTime);
        const nextAfterLast = new Date(last);
        nextAfterLast.setHours(CLAIM_LIMIT_HOUR,0,0,0);
        if (last.getHours() >= CLAIM_LIMIT_HOUR) nextAfterLast.setDate(nextAfterLast.getDate() + 1);
        const remaining = Math.floor((nextAfterLast - new Date())/1000);

        if (remaining > 0){
            freeCoinFab.classList.add('disabled');
            fabTimer.textContent = formatTime(remaining);
        } else {
            freeCoinFab.classList.remove('disabled');
            fabTimer.textContent = "Claim +2";
        }
    }

    function claimFreeCoins(){
        if (isPremium){ showToast("You have unlimited coins as premium user!"); return; }
        if (freeCoinFab.classList.contains('disabled')){ showToast("Your free coin has been claimed, come back tomorrow"); return; }
        coins += COINS_PER_CLAIM;
        lastClaimTime = new Date().toISOString();
        saveToLocalStorage();
        updateCoinDisplay();
        updateTimer();
        showToast("Success Claimed 2 Coins");
    }

    function updateCoinDisplay(){
        if (isPremium) limitText.textContent = "Your Coins : Unlimited";
        else limitText.textContent = `Your Coins : ${coins}`;
    }

    function saveToLocalStorage(){
        const data = { coins, lastClaimTime, isPremium, remindSwitch: remindSwitch.checked, audioSwitch: audioSwitch.checked };
        try { localStorage.setItem('jxstrbug_data', JSON.stringify(data)); } catch(e){}
    }

    function loadFromLocalStorage(){
        try {
            const saved = localStorage.getItem('jxstrbug_data');
            if (saved){
                const data = JSON.parse(saved);
                coins = data.coins || 0;
                lastClaimTime = data.lastClaimTime || null;
                isPremium = data.isPremium || false;
                if (data.remindSwitch !== undefined) remindSwitch.checked = data.remindSwitch;
                if (data.audioSwitch !== undefined) audioSwitch.checked = data.audioSwitch;
            }
        } catch(e){}
        updateCoinDisplay();
        updateTimer();
    }

    // Fungsi untuk mengambil task dari online (contoh dari API)
    async function loadFreeCoinTask() {
    try {
        const res = await fetch(FREECOIN_TASK_URL);
        if (!res.ok) throw new Error('fetch failed');

        const data = await res.json();
        let taskText = "";

        // dukung format: { "task": "..." }  atau string atau array
        if (typeof data === "string") {
            taskText = data;
        } else if (Array.isArray(data)) {
            taskText = data.join("\n");
        } else if (data && typeof data === "object" && typeof data.task === "string") {
            taskText = data.task;
        }

        freecoinTaskText.textContent = taskText;
    } catch (err) {
        // kalau error -> kosong (tidak ada fallback)
        freecoinTaskText.textContent = "";
        console.error('loadFreeCoinTask error:', err);
    }
}

    // prevent scroll jump: save/restore scroll position
    let scrollPos = 0;
    function lockScroll(){
        scrollPos = window.scrollY || document.documentElement.scrollTop;
        document.body.style.position = 'fixed';
        document.body.style.width = '100%';
        document.body.style.top = `-${scrollPos}px`;
    }
    function unlockScroll(){
        document.body.style.position = '';
        document.body.style.width = '';
        document.body.style.top = '';
        window.scrollTo(0, scrollPos);
    }

    function openSideMenu(){
        sideMenu.classList.add('open');
        menuOverlay.classList.add('active');
        sideMenu.setAttribute('aria-hidden','false');
        menuOverlay.setAttribute('aria-hidden','false');
        // jangan geser .wrap — side menu bergeser menutupi konten
        lockScroll();
    }
    function closeSideMenu(){
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
        sideMenu.setAttribute('aria-hidden','true');
        menuOverlay.setAttribute('aria-hidden','true');
        unlockScroll();
    }

    // Handler untuk Free Coin Event
    function openFreeCoinPopup() {
        // Load task setiap kali popup dibuka
        loadFreeCoinTask();
        freecoinPopup.classList.add('active');
        lockScroll();
    }

    function closeFreeCoinPopup() {
        freecoinPopup.classList.remove('active');
        unlockScroll();
    }

    // handlers
    waBugsBtn.addEventListener('click', ()=> window.location.href='bug.html');
    downloadBtn.addEventListener('click', ()=> window.location.href='down.html');
    livechatBtn.addEventListener('click', ()=> livechatPopup.classList.add('active'));
    settingsBtn.addEventListener('click', ()=> settingsPopup.classList.add('active'));

    // Handler untuk tombol Free Coin Event
    freecoinCard.addEventListener('click', openFreeCoinPopup);
    freecoinCloseBtn.addEventListener('click', closeFreeCoinPopup);
    freecoinPopup.addEventListener('click', function(e) {
        if (e.target === freecoinPopup) closeFreeCoinPopup();
    });

    menuBtn.addEventListener('click', openSideMenu);
    menuOverlay.addEventListener('click', closeSideMenu);

    // QR generator sekarang mengarahkan ke qr.html
    qrGeneratorBtn.addEventListener('click', function(){ closeSideMenu(); window.location.href='qr.html'; });
    tools2Btn.addEventListener('click', function(){ closeSideMenu(); showToast("Phone Lookup Just For Premium Only!"); });
    tools3Btn.addEventListener('click', function(){ closeSideMenu(); showToast("Email Osint Just For Premium Only!"); });
    telegramBtn.addEventListener('click', function(){ closeSideMenu(); window.open('https://t.me/', '_blank'); showToast("Opening Telegram..."); });

    askBtn.addEventListener('click', function(){ window.location.href = 'lvask.html'; });
    buyBtn.addEventListener('click', function(){ window.location.href = 'lvbuy.html'; });
    livechatCancelBtn.addEventListener('click', function(){ livechatPopup.classList.remove('active'); });

    settingsCancelBtn.addEventListener('click', function(){ settingsPopup.classList.remove('active'); });

    remindSwitch.addEventListener('change', saveToLocalStorage);
    audioSwitch.addEventListener('change', saveToLocalStorage);

    updateCard.addEventListener('click', function(){ showToast("Update information will be displayed here"); });

    livechatPopup.addEventListener('click', function(e){ if (e.target === livechatPopup) livechatPopup.classList.remove('active'); });
    settingsPopup.addEventListener('click', function(e){ if (e.target === settingsPopup) settingsPopup.classList.remove('active'); });

    freeCoinFab.addEventListener('click', function(){ if (!freeCoinFab.classList.contains('disabled')) claimFreeCoins(); else showToast("Your free coin has been claimed, come back tomorrow"); });

    function toggleFabCollapse(){
        const collapsed = fabContainer.classList.toggle('collapsed');
        fabTab.textContent = collapsed ? '›' : '‹';
        fabTab.classList.add('rotate');
        setTimeout(()=> fabTab.classList.remove('rotate'), 180);
    }
    fabTab.addEventListener('click', toggleFabCollapse);
    fabTab.addEventListener('keydown', function(e){ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFabCollapse(); } });

    limitBtn.addEventListener('click', function(){ topupPopup.classList.add('active'); });
    profileBtn.addEventListener('click', function(){
        if (isPremium) successPopup.classList.add('active');
        else {
            premiumTitle.textContent = "Log in premium account";
            premiumText.textContent = "You need to enter the premium key to open all access, unlimited coins, unlimited sender, and more. Contact the admin to purchase premium key.";
            premiumKeyInput.value = "";
            premiumPopup.classList.add('active');
        }
    });
    cancelBtn.addEventListener('click', function(){ topupPopup.classList.remove('active'); });
    topupBtn.addEventListener('click', function(){ topupPopup.classList.remove('active'); window.location.href = 'topup.html'; });
    premiumCancelBtn.addEventListener('click', function(){ premiumPopup.classList.remove('active'); resetLoginButton(); });
    successCloseBtn.addEventListener('click', function(){ successPopup.classList.remove('active'); });

    topupPopup.addEventListener('click', function(e){ if (e.target === topupPopup) topupPopup.classList.remove('active'); });
    premiumPopup.addEventListener('click', function(e){ if (e.target === premiumPopup) { premiumPopup.classList.remove('active'); resetLoginButton(); } });
    successPopup.addEventListener('click', function(e){ if (e.target === successPopup) successPopup.classList.remove('active'); });

    premiumKeyInput.addEventListener('keypress', function(e){ if (e.key === 'Enter') premiumLoginBtn.click(); });

    premiumLoginBtn.addEventListener('click', function(){
        const key = premiumKeyInput.value.trim();
        if (!key) { showToast("Please enter a premium key"); return; }
        showLoading(true);
        validatePremiumKey(key);
    });

    async function validatePremiumKey(key) {
        try {
            const response = await fetch('https://api.npoint.io/ed3d388f25156f8218a8');
            if (!response.ok) throw new Error(`status:${response.status}`);
            const data = await response.json();
            let isValid = false;
            if (Array.isArray(data) && data.includes(key)) isValid = true;
            else if (data.validKeys && Array.isArray(data.validKeys) && data.validKeys.includes(key)) isValid = true;
            else if (data.keys && Array.isArray(data.keys) && data.keys.includes(key)) isValid = true;
            else if (data.premiumKeys && Array.isArray(data.premiumKeys) && data.premiumKeys.includes(key)) isValid = true;
            else if (typeof data === 'object') {
                const keysArray = Object.values(data).flat();
                if (keysArray.includes(key)) isValid = true;
            }

            if (isValid) {
                isPremium = true;
                updateCoinDisplay();
                freeCoinFab.style.display = 'none';
                premiumPopup.classList.remove('active');
                successPopup.classList.add('active');
                saveToLocalStorage();
                showToast("Premium access granted!");
            } else {
                showToast("Wrong key. Please check your premium key.");
            }
        } catch (err) {
            const testKeys = ["PREMIUM123","JXSTR2024","BUGV6ACCESS","TESTKEY123"];
            if (testKeys.includes(key.toUpperCase())) {
                isPremium = true;
                updateCoinDisplay();
                freeCoinFab.style.display = 'none';
                premiumPopup.classList.remove('active');
                successPopup.classList.add('active');
                saveToLocalStorage();
                showToast("Premium access granted! (Test Mode)");
            } else {
                showToast("Error validating key. Please try again or check your connection.");
            }
        } finally {
            showLoading(false);
        }
    }

    function showLoading(show){
        if (show){ loginBtnText.style.display = 'none'; loginLoading.style.display = 'inline-block'; premiumLoginBtn.disabled = true; }
        else { loginBtnText.style.display = 'inline-block'; loginLoading.style.display = 'none'; premiumLoginBtn.disabled = false; }
    }
    function resetLoginButton(){ showLoading(false); }

    let toastTimer = null;
    function showToast(message){
        toast.textContent = message;
        toast.classList.add('show');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(()=> toast.classList.remove('show'), 3000);
    }

    async function debugAPI(){
        try {
            if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
                const r = await fetch('https://api.npoint.io/ed3d388f25156f8218a8');
                const d = await r.json();
                console.log("Debug - API Structure:", d);
            }
        } catch(e){ console.log("Debug - API Error:", e); }
    }

    // Jangan biarkan Escape menutup side menu atau popup jika maintenance aktif
    document.addEventListener('keydown', function(e){
        if (maintenanceOverlay && maintenanceOverlay.classList.contains('active')) {
            // cegah Escape / tab keluar dari maintenance
            if (e.key === 'Escape' || (e.key === 'Tab' && !maintenanceOverlay.contains(document.activeElement))) {
                e.preventDefault();
                e.stopPropagation();
            }
            return;
        }
        if (e.key === 'Escape' && sideMenu.classList.contains('open')) closeSideMenu();
    });

    // Tambahkan handler untuk Escape key di popup Free Coin
    document.addEventListener('keydown', function(e){
        if (e.key === 'Escape' && freecoinPopup.classList.contains('active')) closeFreeCoinPopup();
    });

    // Jangan tutup maintenance overlay via klik
    if (maintenanceOverlay) {
        maintenanceOverlay.addEventListener('click', function(e){
            // cegah klik menembus; tidak menutup overlay
            e.stopPropagation();
            e.preventDefault();
        });
        // fokuskan overlay agar aksesibilitas dan mencegah interaksi di bawahnya
        maintenanceOverlay.focus();
        // pastikan class active ada (overlay muncul sejak awal)
        maintenanceOverlay.classList.add('active');
        // kunci scroll saat maintenance muncul
        lockScroll();
    }

    function init(){
        loadFromLocalStorage();
        updateTimer();
        setInterval(updateTimer, 1000);
        debugAPI();

        // Load task awal saat aplikasi dimulai
        loadFreeCoinTask();
    }
    init();
});
</script>
</body>
</html>
